<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta tags for character set, rendering mode, and title -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Sonny Taylor</title>

    <!-- Meta tags for description and viewport settings -->
    <meta
      name="description"
      content="Explore Sonny Taylor's Terminal Portfolio"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Open Graph Protocol Metadata for social media sharing -->
    <meta property="og:title" content="Sonny Taylor - Terminal Portfolio" />
    <meta
      property="og:description"
      content="Explore Sonny Taylor's Terminal Portfolio"
    />
    <meta property="og:image" content="assets/img/thumbnail.png" />
    <meta property="og:url" content="https://sonnytaylor.uk" />
    <meta property="og:type" content="website" />

    <!-- Link to external style sheets and favicon -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
  </head>

  <body>
    <!-- Command and answer sections -->
    <section>
      <p class="command" style="padding-top: 6px">whoami</p>
      <p class="answer" style="color: rgb(128, 204, 230)">Sonny Taylor</p>
    </section>

    <section>
      <p class="command">ls</p>
      <p class="answer">about_me.txt skills.txt contact_info.txt</p>
    </section>

    <section>
      <p class="command">cat about_me.txt</p>
      <p class="answer">
        My name is <span style="color: rgb(128, 204, 230)">Sonny Taylor</span>.
        I am a passionate amateur web developer with knowledge in various
        technologies.
      </p>
    </section>

    <section>
      <p class="command">cat skills.txt</p>
      <p class="answer">
        Python, HTML, CSS, JavaScript, Linux, TailwindCSS, and AWS
      </p>
    </section>

    <section>
      <p class="command">cat contact_info.txt</p>
      <p class="answer">
        Email: santinotaylor08@gmail.com<br />Discord: .salaminipples
      </p>
    </section>

    <section>
      <p class="command">cat CatFact.txt</p>
      <p class="answer" id="cat-fact"></p>
    </section>

    <section>
      <p class="command untyped" style="border: none"></p>
    </section>

    <script>
      fetch("https://catfact.ninja/fact")
        .then((response) => response.json())
        .then((data) => {
          const catFact = data.fact;
          const storedFacts = localStorage.getItem("catFacts");
          let storedFactsArray = [];

          if (storedFacts) {
            storedFactsArray = JSON.parse(storedFacts);
          }

          if (storedFactsArray.includes(catFact)) {
            // If the fact has already been shown, fetch a new one
            console.log("Fact already shown (${catFact})");
            fetchNewCatFact();
          } else {
            // Store the new fact in local storage and display it
            storedFactsArray.push(catFact);
            localStorage.setItem("catFacts", JSON.stringify(storedFactsArray));
            document.getElementById("cat-fact").textContent = catFact;
          }
        })
        .catch((error) => {
          console.error("Error:", error);
          document.getElementById("cat-fact").innerHTML =
            "Error: Failed to fetch cat fact";
        });

      function fetchNewCatFact() {
        fetch("https://catfact.ninja/fact")
          .then((response) => response.json())
          .then((data) => {
            const catFact = data.fact;
            const storedFacts = localStorage.getItem("catFacts");
            let storedFactsArray = [];

            if (storedFacts) {
              storedFactsArray = JSON.parse(storedFacts);
            }

            if (storedFactsArray.includes(catFact)) {
              // If the new fact has also been shown before, fetch another new one
              fetchNewCatFact();
            } else {
              // Store the new fact in local storage and display it
              storedFactsArray.push(catFact);
              localStorage.setItem(
                "catFacts",
                JSON.stringify(storedFactsArray)
              );
              document.getElementById("cat-fact").textContent = catFact;
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            document.getElementById("cat-fact").innerHTML =
              "Error: Failed to fetch cat fact";
          });
      }

      // BEGIN: Change tab name based on user's focus
      document.addEventListener("visibilitychange", function () {
        if (document.visibilityState === "hidden") {
          setTimeout(function () {
            document.title = "Come back ðŸ˜¢";
          }, 1000); // Delay of 2000 milliseconds (2 seconds)
        } else {
          document.title = "Sonny Taylor";
        }
      });
      // END: Change tab name based on user's focus
    </script>
  </body>
</html>
